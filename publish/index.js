"use strict";var e=require("react"),t=require("react/jsx-runtime");let n,r;const s=new Map;(e=>{r||(n={...n,...e},r=new Proxy(n,{get(e,t){if("string"==typeof t&&t in e)return e[t]},set(e,t,n){if("string"==typeof t){const r=e[t];if(JSON.stringify(r)!==JSON.stringify(n)){e[t]=n;const r=s.get(t);r&&r.forEach((e=>e(n)))}return!0}return!1}}))})({styleData:null});const o="State is not initialized yet ğŸ‘º",l=(e,t)=>(s.has(e)||s.set(e,new Set),s.get(e)?.add(t),()=>s.get(e)?.delete(t)),a=t=>{const n=()=>(r?{...r}:(console.warn(o),{}))[t];return[e.useSyncExternalStore((e=>l(t,e)),n,n),e.useCallback((e=>{const s=n(),l="function"==typeof e?e(s):e;var a,c;Object.is(s,l)||(a=t,c=l,r?r[a]=c:console.warn(o))}),[t])]},c=(e,t)=>e.length===t.length&&e.every(((e,n)=>e===t[n])),i=({id:e,fileNames:t})=>{if(t&&t.forEach((e=>{const t=document.head.querySelector(`style[name="${e}"]`);t&&document.head.removeChild(t)})),e&&!t){document.head.querySelectorAll(`style[atom="${e}"]`).forEach((e=>{document.head.removeChild(e)}))}},u=(e,t)=>{let n=document.head.querySelector(`style[name="${t}"]`);return n||(n=document.createElement("style"),n.setAttribute("atom",e),n.setAttribute("name",t),document.head.appendChild(n)),n},f=t=>{const[n,r]=a("styleData"),s=e.useRef({}),o=e=>{Object.entries(e??{}).forEach((([e,n])=>{const o=s.current?.[e];let l=[];if(o){const e=o.fileNames||[],t=n.fileNames||[];l=e.filter((e=>!t.includes(e)))}(async(e,t,n,r)=>{const s=Object.keys(e)[0],{fileNames:o,loaded:l}=e[s];if(o&&0!==o.length)for(const e of o){const a=u(s,e);try{const{default:t}=await n(e);a.textContent=t}catch(t){console.error(`Loading failed for "${e}" style`,"\n",t,"\n","âœ¦styledAtomâœ¦"),a.textContent="â€”empty atomâ€”"}finally{t&&c(t?.fileNames||[],o||[])&&l||r((e=>({...e,[s]:{...e?.[s],loaded:!0}})))}}else console.warn(`No files to load for id "${s}"`,"\n","âœ¦styledAtomâœ¦")})({[e]:n},o||{},t,r),o&&l.length>0&&i({id:e,fileNames:l})}))};e.useEffect((()=>{const e=Object.keys(s.current??{}),t=n?Object.keys(n):[];e.filter((e=>!t.includes(e))).forEach((e=>i({id:e}))),n&&o(n),s.current={...n}}),[n])},d="âœ¦styledAtomâœ¦",y="empty",m=()=>{sessionStorage.removeItem(d)},h=e=>{sessionStorage.setItem(d,JSON.stringify(e))};exports.StyleCore=({path:t,watch:s})=>{f(t);const a=r?{...r}:(console.warn(o),{});return e.useEffect((()=>{const e=sessionStorage.getItem(d);if(!s)return void(e&&m());if(!e){if(!a.styleData)return void h(y);h(a.styleData)}const t=(e=>{const t=[];for(const s in n)t.push(l(s,(()=>{e({...r})})));return()=>{t.forEach((e=>e()))}})((e=>{e.styleData?h(e.styleData):h(y)}));return()=>{t(),e&&m()}}),[a]),null},exports.StyledAtom=({fileNames:n,fallback:r,onLoad:s,children:o})=>{const[l,c]=a("styleData"),i=e.useRef(!1),u=`âœ¦${e.useId()}`.replace(/[:r]/g,"");e.useEffect((()=>(c((e=>({...e,[u]:{...e?.[u],fileNames:n}}))),()=>{c((e=>{if(!e)return null;const{[u]:t,...n}=e;return Object.keys(n).length?n:null})),i.current=!1})),[n,u,c]);const f=l?.[u]?.loaded??!1;return e.useEffect((()=>{s&&f&&!i.current?(s(f),i.current=!0):f||(i.current=!1)}),[f,s]),o?f?t.jsx(t.Fragment,{children:o}):r||null:null};
