"use strict";var e=require("react"),t=require("react/jsx-runtime");let n,r;const l=new Map;(e=>{r||(n={...n,...e},r=new Proxy(n,{get(e,t){if("string"==typeof t&&t in e)return e[t]},set(e,t,n){if("string"==typeof t){const r=e[t];if(JSON.stringify(r)!==JSON.stringify(n)){e[t]=n;const r=l.get(t);r&&r.forEach((e=>e(n)))}return!0}return!1}}))})({styleData:null});const s=t=>{const n=()=>(r?{...r}:{})[t];return[e.useSyncExternalStore((e=>{return n=t,r=e,l.has(n)||l.set(n,new Set),l.get(n)?.add(r),()=>l.get(n)?.delete(r);var n,r}),n,n),e.useCallback((e=>{const l=n(),s="function"==typeof e?e(l):e;var a,c;Object.is(l,s)||(a=t,c=s,r&&(r[a]=c))}),[t])]},a=({id:e,fileNames:t})=>{if(t&&t.forEach((e=>{const t=document.head.querySelector(`style[name="${e}"]`);t&&t.remove()})),e&&!t){document.head.querySelectorAll(`style[atom="${e}"]`).forEach((e=>{e.remove()}))}},c=async(e,t,n,r)=>{const l=Object.keys(e)[0],{fileNames:s,encap:a,loaded:c}=e[l];if(!s||0===s.length)return;const o=s.map((async e=>{const t=((e,t)=>{let n=document.head.querySelector(`style[name="${t}"]`);return n||(n=document.createElement("style"),n.setAttribute("atom",e),n.setAttribute("name",t),document.head.appendChild(n)),n})(l,e);try{const{default:r}=await n(e);t.textContent=a?`.${e}{${r}}`:r}catch(n){console.error(`Loading failed for "${e}" style`,"\n","✦styledAtom✦","\n",n),t.textContent="⛔︎"}}));var i,u;await Promise.all(o),t&&(u=s||[],(i=t?.fileNames||[]).length===u.length&&i.every(((e,t)=>e===u[t])))&&c||r((e=>({...e,[l]:{...e?.[l],loaded:!0}})))},o=t=>{const[n,r]=s("styleData"),l=e.useRef({});e.useEffect((()=>{const e=Object.keys(l.current??{}),s=n?Object.keys(n):[];e.filter((e=>!s.includes(e))).forEach((e=>a({id:e}))),n&&(e=>{Object.entries(e??{}).forEach((([e,n])=>{const s=l.current?.[e];let o=[];if(s){const e=s.fileNames||[],t=n.fileNames||[];o=e.filter((e=>!t.includes(e)))}c({[e]:n},s||{},t,r),s&&o.length>0&&a({id:e,fileNames:o})}))})(n),l.current={...n}}),[n])},i=({path:e})=>(o(e),null);i.displayName="✦StyleCore";const u=({fileNames:n=[],encap:r,fallback:l,onLoad:a,children:c})=>{if(0===n.length)return console.error("Some StyledAtom was rendered with empty fileNames","\n","✦styledAtom✦","\n"),l||c||null;const[o,i]=s("styleData"),u=e.useRef(!1),f=`${e.useId()}`.replace(/^(.{2})(.*).$/,"✦$2"),d=o?.[f]?.loaded??!1,y=r?t.jsx("div",{"atom-shell":f,className:`${n.join(" ")}${"string"==typeof r?` ${r}`:""}`,children:c}):c;return e.useEffect((()=>(i((e=>({...e,[f]:{...e?.[f],encap:r,fileNames:n}}))),()=>{i((e=>{if(!e)return null;const{[f]:t,...n}=e;return Object.keys(n).length?n:null})),u.current=!1})),[n,f,i]),e.useEffect((()=>{a&&d&&!u.current?(a(),u.current=!0):d||(u.current=!1)}),[d,a]),c?d?y:l||null:null};u.displayName="✦StyledAtom",exports.StyleCore=i,exports.StyledAtom=u;
